# Ably_iOS_heejin

## 👩🏻‍💻Day1 ( 22.09.02 21: 00~ 03:00)

퇴근하고 과제 시작!

- **탭바 컨트롤러 추가**

  - 가장 첫 작업인 탭 바 컨트롤러를 루트 컨트롤러로 만들어주고 두개의 탭을 추가 했다.
  - 그리고 애플 시스템 이미지를 넣어주었다
  - [ ] SFSymbol 로 추후 변경이 필요하다

- **홈VC 생성**

  - 화면을 꽉 채우는 콜렉션뷰를 만들어 헤더뷰에는 배너가 들어갈 배너뷰를 넣었다.

- **배너 생성**

  - 배너도 콜렉션뷰를 이용해 만들었고, 좌우 스크롤을 통해 스와이프 가능하도록 수정을 했다.
  - 데이터는 임시로 세개 넣었다.

- **콜렉션 뷰 셀 생성**

  - 전체적인 골격 ( 상품 이미지, 할인율 라벨, 가격 라벨, 상품 설명 라벨 등 ) 을 잡았다.
  - snapkit을 이용하였다.
  - 콜렉션 뷰 셀 내부 아이템들의 레이아웃을 잡는 과정이 어려웠다. 계속 라벨이 cell > contentView 의 밖으로 넘어가서 한참 고민했다.
  - 결국 contentView 안에 contentView 의 프레임과 동일한 프레임 뷰를 만들어 내부 아이템들이 골격을 잡을 수 있도록 수정 완료하였다.
  - 콜렉션 뷰 셀의 높이는 컨텐츠에 따라 auto-resizing 이 가능하도록 하였다.
  - 할인율 계산도 생각보다 어려웠다. floor() 을 통해 내림을 하고 Int() 를 통해 정수로 바꾸었다. 로직은 좀 수정해야할 것 같다.

- **네트워크 연결**

  - 네트워크 response를 decoding할 모델을 만들었다.
  - URLSession을 이용하여 통신을 하였고, 그 데이터를 콜렉션뷰 셀과 배너에 넣었다.

- **SDWebImage**

  - 마지막으로, 비어있는 화면에 SDWebImage를 이용해 URL 을 이미지로 넣었다. 기존에 킹피셔를 사용했었는데, 사용방법이 거의 비슷해서 어렵지 않았다.

## 👩🏻‍💻Day1 ( 22.09.02 10: 00 ~ )

realm 때문에 스트레스 받은 날 ..

- **realm을 임포트하여 하트 관련 로직을 추가**

  - realm에 저장할 데이터 모델에 대해 고민을 많이했다. 처음엔 좋아요 한 인덱스만 Int 로 저장할까 하다가, 그럼 좋아요 페이지(두번째 탭)에서 전체 데이터를 가져올 수 없기 때문에 id 포함 서버에서 받아오는 스킴 저전체를 저장하기로 했다.
  - 렘에 저장되는 데이터는 하트를 누른 상품들 만이다!
  - 하트 클릭시 그 셀만 reload를 하고싶어 reloadItem(at:) 을 사용했는데, 왜인지 계속 레이아웃이 다시 그려지는 문제가 있어 reloadData() 를 이용했다. 이렇게 되면 앞으로 추가되는 데이터들은 insertItems() 으로 셀을 추가해야한다. 그래도 버튼 하나를 누르는데 10개의 셀이 리로드되는건 걱정이다..

- **pull to refresh 추가**

  - 현재는 아직 페이징/인피니티 스크롤이 구현되지 않아서 티가 나지 않는다. 당겨서 새로고침을 하면 맨 처음 홈에 접속했을 때 보이는 아이템 10개만 보여지도록 했다.

- **콜렉션뷰 셀 UI 수정**

  - 상품 이미지에 하트 버튼 추가
  - 어제 만든 콜렉션뷰 셀들 중 조건이 있는 아래 아이들
    - 할인을 하지 않는경우 할인율 라벨을 숨기기
    - 신상품이 아닐경우 NEW 뱃지를 숨기기
    - 10개 이하의 상품이 구매중인 애들이면 구매중 라벨을 숨기기
      을 어떻게 할지 고민하다 스택뷰로 변경하였다.
  - 스택뷰 안의 컴포넌트들은 removeFromSuperView() 를 통해 snpkit의 remakeConstraint 없이도 간단하게 처리할 수 있었다!

- **좋아요 페이지를 새로 만들었다!**

  - 홈 에서 하트를 눌러 realm에 저장한 아이템들을 전체 불러온다
  - 여기서는 이미지뷰에 하트가 보이지 않는다.

- **여기까지 작업하고 첫 커밋을 찍었다.!**

---

---

# 👀 남은 개발 사항

1. 페이지 네이션 + 인피니트 스크롤을 적용한다.
2. 예쁜 SFSymbol 로 변경이 필요하다
3. 상품이미지/배너 이미지의 placeholder을 추가해야한다.
4. 좋아요 화면 좋아요한 상품이 없을때 화면을 추가해줘야 한다.
5. 배너에 타이머를 추가해서 자동으로 넘어가도록 해야한다.
6. 배너 하단 텍스트를 현재페이지/전체페이지 수 로 변경해야한다.
7. 탭바 아이템의 이미지를 수정해야한다.
8. 하트 버튼에 핑크색을 적용해야한다.
9. UIColor extension을 추가해야한다.
10. realm read/delete 코드를 싱글톤 메서드로 빼자
11. realm 하트 비교 로직 수정을 해야한다.
12. 전체적으로 MVVM, 코드 리팩토링 필요
13. 테스트 코드 !!!!!!!

# 👀 궁금한 사항

1. 렘에 데이터를 넣을때, id를 정렬해서 넣어야할까?
2. 상품의 id, 배너의 id 를 index로 처리해도 되는걸까?
3. 할인율을 어떻게 처리할까 ? 보통 어떤식으로들 하지?
4. 배너 이미지는 기종별로 비율이 달라져야 하는지, 아니면 고정인가!
